!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chord=t.scale=t.chords=t.chordMaps=t.scales=t.scaleMaps=void 0;var r=n(2);t.scaleMaps={major:"WWHWWW",minor:"WHWWHW","major pentatonic":"WWAW","ionian pentatonic":"HHWH","mixolydian pentatonic":"HHWA",ritusen:"WAWW",egyptian:"WAWA","neopolitan major pentatonic":"HHHH","vietnamese 1":"AWWH",pelog:"HWHH",kumoijoshi:"HHWH",hirajoshi:"WHHH",iwato:"HHHH","in-sen":"HHWA","lydian pentatonic":"HWHH","malkos raga":"AWAW","locrian pentatonic":"AWHH","minor pentatonic":"AWWA","minor six pentatonic":"AWWW","flat three pentatonic":"WHHW","flat six pentatonic":"WWAH",scriabin:"HAAW","whole tone pentatonic":"HWWW","lydian #5p pentatonic":"HWWA","lydian dominant pentatonic":"HWHA","minor #7M pentatonic":"AWWH","super locrian pentatonic":"AHWH","minor hexatonic":"WHWWH",augmented:"AHAHA","major blues":"WHHAW",piongio:"WAWWH","prometheus neopolitan":"HAWAH",prometheus:"WWWAH","mystery #1":"HAWWW","six tone symmetric":"HAHAH","whole tone":"WWWWW","messiaen's mode #5":"HHHHH","minor blues":"AWHHA","locrian major":"WWHHWW","double harmonic lydian":"HAWHHA","harmonic minor":"WHWWHA",altered:"HWHWWW","locrian #2":"WHWHWW","mixolydian b6":"WWHWHW","lydian dominant":"WWWHWH",lydian:"WWWHWW","lydian augmented":"WWWWHW","dorian b2":"HWWWWH","melodic minor":"WHWWWW",locrian:"HWWHWW",ultralocrian:"HWHWWH","locrian 6":"HWWHAH","augmented heptatonic":"AHHWHA","romanian minor":"WHAHWH","dorian #4":"WHAHWH","lydian diminished":"WHAHWW",phrygian:"HWWWHW","leading whole tone":"WWWWWH","lydian minor":"WWWHHW","phrygian dominant":"HAHWHW",balinese:"HWWWHA","neopolitan major":"HWWWWW",aeolian:"WHWWHW","harmonic major":"WWHWHA","double harmonic major":"HAHWHA",dorian:"WHWWWH","hungarian minor":"WHAHHA","hungarian major":"AHWHWH",oriental:"HAHHAH",flamenco:"HWHWHA","todi raga":"HWAHHA",mixolydian:"WWHWWH",persian:"HAHHWA",enigmatic:"HAWWWH","major augmented":"WWHAHW","lydian #9":"AHWHWW","messiaen's mode #4":"HHAHHHA","purvi raga":"HAHHHHA","spanish heptatonic":"HWHHWHW",bebop:"WWHWWHH","bebop minor":"WHHHWWH","bebop major":"WWHWHHW","bebop locrian":"HWWHHHW","minor bebop":"WHWWHWH",diminished:"WHWHWHW",ichikosucho:"WWHHHWW","minor six diminished":"WHWWHHW","half-whole diminished":"HWHWHWH","kafi raga":"AHHWWHH","messiaen's mode #6":"WWHHWWH","composite blues":"WHHHHHWH","messiaen's mode #3":"WHHWHHWH","messiaen's mode #7":"HHHWHHHHW",chromatic:"HHHHHHHHHHH"},t.scales=function(){return Object.keys(t.scaleMaps)},t.chordMaps={"5th":[0,7],fifth:[0,7],"M7#5sus4":[0,5,8,11],"7#5sus4":[0,5,8,10],sus4:[0,5,7],"suspended fourth":[0,5,7],M7sus4:[0,5,7,11],"7sus4":[0,5,7,10],"suspended fourth seventh":[0,5,7,10],"7no5":[0,4,10],aug:[0,4,8],"+":[0,4,8],"+5":[0,4,8],augmented:[0,4,8],Mb6:[0,4,20],M7b6:[0,4,8,11],"major seventh flat sixth":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7+5":[0,4,8,11],"+maj7":[0,4,8,11],"augmented seventh":[0,4,8,11],"7#5":[0,4,8,10],"+7":[0,4,8,10],"7aug":[0,4,8,10],aug7:[0,4,8,10],"7b13":[0,4,10,20],M:[0,4,7],major:[0,4,7],maj7:[0,4,7,11],"Δ":[0,4,7,11],ma7:[0,4,7,11],M7:[0,4,7,11],Maj7:[0,4,7,11],"major seventh":[0,4,7,11],"7th":[0,4,7,10],dom:[0,4,7,10],"dominant seventh":[0,4,7,10],add6:[0,4,7,9],add13:[0,4,7,9],M6:[0,4,7,9],sixth:[0,4,7,9],"7add6":[0,4,7,10,21],"7add13":[0,4,7,10,21],"7b6":[0,4,7,8,10],Mb5:[0,4,6],M7b5:[0,4,6,11],"7b5":[0,4,6,10],"maj#4":[0,4,7,11,18],"Δ#4":[0,4,7,11,18],"Δ#11":[0,4,7,11,18],lydian:[0,4,7,11,18],"7#11":[0,4,7,10,18],"7#4":[0,4,7,10,18],"lydian dominant seventh":[0,4,7,10,18],"M6#11":[0,4,7,9,18],M6b5:[0,4,7,9,18],"6#11":[0,4,7,9,18],"6b5":[0,4,7,9,18],"7#11b13":[0,4,7,10,18,20],"7b5b13":[0,4,7,10,18,20],"m#5":[0,3,8],"m+":[0,3,8],mb6:[0,3,8],mb6M7:[0,3,8,11],"m7#5":[0,3,8,10],m:[0,3,7],min:[0,3,7],"-":[0,4,7],minor:[0,3,7],"m/ma7":[0,3,7,11],"m/maj7":[0,3,7,11],mM7:[0,3,7,11],mMaj7:[0,3,7,11],"m/M7":[0,3,7,11],"mΔ":[0,3,7,11],"minor/major seventh":[0,3,7,11],m7:[0,3,7,10],min7:[0,3,7,10],mi7:[0,3,7,10],"minor seventh":[0,3,7,10],m6:[0,3,7,9],"minor sixth":[0,3,7,9],mMaj7b6:[0,3,7,8,11],dim:[0,3,6],"°":[0,3,6],o:[0,3,6],diminished:[0,3,6],oM7:[0,3,6,11],m7b5:[0,3,6,10],"ø":[0,3,6,10],dim7:[0,3,6,9],"°7":[0,3,6,9],o7:[0,3,6,9],"diminished seventh":[0,3,6,9],o7M7:[0,3,6,9,11],"4th":[0,5,10,15],quartal:[0,5,10,15],madd4:[0,3,5,7],m7add11:[0,3,7,10,17],m7add4:[0,3,7,10,17],"+add#9":[0,4,8,15],"7#5#9":[0,4,8,10,15],"7alt":[0,4,8,10,15],"7#9":[0,4,7,10,15],"dominant sharp ninth":[0,4,7,10,15],"13#9":[0,4,7,10,15,21],"7#9b13":[0,4,7,10,15,20],"maj7#9#11":[0,4,7,11,15,18],"7#9#11":[0,4,7,10,15,18],"7b5#9":[0,4,7,10,15,18],"13#9#11":[0,4,7,10,15,18,21],"7#9#11b13":[0,4,7,10,15,18,20],sus2:[0,2,7],"suspended second":[0,2,7],"M9#5sus4":[0,5,8,11,14],sus24:[0,2,5,7],sus4add9:[0,2,5,7],M9sus4:[0,5,7,11,14],"11th":[0,7,10,14,17],eleventh:[0,7,10,14,17],"9sus4":[0,5,7,10,14],"9sus":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],"13sus":[0,5,7,10,14,21],"9no5":[0,4,10,14],"13no5":[0,4,10,14,21],"M#5add9":[0,4,8,14],"+add9":[0,4,8,14],"maj9#5":[0,4,8,11,14],"Maj9#5":[0,4,8,11,14],"9#5":[0,4,8,10,14],"9+":[0,4,8,10,14],"9b13":[0,4,10,14,20],Madd9:[0,4,7,14],add9:[0,4,7,14],add2:[0,4,7,14],maj9:[0,4,7,11,14],"Δ9":[0,4,7,11,14],"major ninth":[0,4,7,11,14],"9th":[0,4,7,10,14],"dominant ninth":[0,4,7,10,14],"6/9":[0,4,7,9,14],"sixth/ninth":[0,4,7,9,14],maj13:[0,4,7,11,14,21],Maj13:[0,4,7,11,14,21],"major thirteenth":[0,4,7,11,14,21],M7add13:[0,4,7,9,11,14],"13th":[0,4,7,10,14,21],"dominant thirteenth":[0,4,7,10,14,21],M9b5:[0,4,6,11,14],"9b5":[0,4,6,10,14],"13b5":[0,4,6,9,10,14],"9#5#11":[0,4,8,10,14,18],"maj9#11":[0,4,7,11,14,18],"Δ9#11":[0,4,7,11,14,18],"major sharp eleventh (lydian)":[0,4,7,11,14,18],"9#11":[0,4,7,10,14,18],"9+4":[0,4,7,10,14,18],"9#4":[0,4,7,10,14,18],"M13#11":[0,4,7,11,14,18,21],"maj13#11":[0,4,7,11,14,18,21],"M13+4":[0,4,7,11,14,18,21],"M13#4":[0,4,7,11,14,18,21],"13#11":[0,4,7,10,14,18,21],"13+4":[0,4,7,10,14,18,21],"13#4":[0,4,7,10,14,18,21],"9#11b13":[0,4,7,10,14,18,20],"9b5b13":[0,4,7,10,14,18,20],"m9#5":[0,3,8,10,14],madd9:[0,3,7,14],mMaj9:[0,3,7,11,14],m9:[0,3,7,10,14],"minor ninth":[0,3,7,10,14],m69:[0,3,7,9,14],m13:[0,3,7,10,14,21],"minor thirteenth":[0,3,7,10,14,21],mMaj9b6:[0,3,7,8,11,14],m9b5:[0,2,3,6,10],m11A:[0,3,8,10,14,17],m11:[0,3,7,10,14,17],"minor eleventh":[0,3,7,10,14,17],b9sus:[0,5,7,10,14],phryg:[0,5,7,10,13],"suspended fourth flat ninth":[0,5,7,10,13],"11b9":[0,7,10,13,17],"7sus4b9b13":[0,5,7,10,13,20],"7b9b13sus4":[0,5,7,10,13,20],alt7:[0,4,10,13],altered:[0,4,10,13],"7#5b9":[0,4,8,10,13],Maddb9:[0,4,7,13],M7b9:[0,4,7,11,13],"7b9":[0,4,7,10,13],"dominant flat ninth":[0,4,7,10,13],"13b9":[0,4,7,10,13,21],"7b9b13":[0,4,7,10,13,20],"7#5b9#11":[0,4,8,10,13,18],"7b9#11":[0,4,7,10,13,18],"7b5b9":[0,4,7,10,13,18],"13b9#11":[0,4,7,10,13,18,21],"7b9b13#11":[0,4,7,10,13,18,20],"7b9#11b13":[0,4,7,10,13,18,20],"7b5b9b13":[0,4,7,10,13,18,20],mb6b9:[0,3,8,13],"7b9#9":[0,4,7,10,13,15]},t.chords=function(){return Object.keys(t.chordMaps)},t.scale=function(e){var n=e.match(/([A-Ga-g])(b|#)?([0-9])\s([a-zA-Z0-9\s\#]+)/),i=n[1],o=n[2]||"",a=i+o+n[3],s=n[4].toLowerCase();if(!t.scaleMaps[s])throw"No such scale "+s;for(var u=r.Util.midiPitchFromNote(a),c=[a[0].toUpperCase()+a.slice(1)],l=0;l<t.scaleMaps[s].length;l++){"A"===t.scaleMaps[s][l]?u+=3:"W"===t.scaleMaps[s][l]?u+=2:u+=1;var p=r.Util.noteFromMidiPitch(u,!o||"b"===o);p=p[0].toUpperCase()+p.slice(1),c.push(p)}return c},t.chord=function(e){var n=e.match(/([A-Ga-g])(b|#)?([a-zA-Z0-9\-\+\#\s\Δ\°\ø\(\)\/]+)(\_[0-9])?/),r=n[1],i=n[2]||"",o=n[4]&&n[4].replace(/\D/,"")||"4",a=r+i+o,s=n[3];if(!t.chordMaps[s])throw"No such chord "+s;var u=t.scale(a+" chromatic").concat(t.scale(r+i+(+o+1)+" chromatic")),c=[];return t.chordMaps[s].forEach((function(e){c.push(u[e])})),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flat=t.dice=t.pickOne=t.sizzleMap=t.shuffle=t.expandStr=t.isNote=void 0,t.isNote=function(e){return/^[a-gA-G](?:#|b)?\d$/.test(e)},t.expandStr=function(e){return e=(e=(e=(e=JSON.stringify(e.split(""))).replace(/,"\[",/g,", [")).replace(/"\[",/g,"[")).replace(/,"\]"/g,"]"),JSON.parse(e)},t.shuffle=function(e){var t=e.length-1;return e.forEach((function(n,r){var i=Math.round(Math.random()*t);e[r]=e[i],e[i]=n})),e},t.sizzleMap=function(e){void 0===e&&(e=127);var t=Math.PI,n=[t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6,t],r=[0,t/6,t/4,t/3,t/2,2*t/3,3*t/4,5*t/6];return r.reverse(),n.concat(r).map((function(t){return Math.round(Math.sin(t)*e)}))},t.pickOne=function(e){return e.length>1?e[Math.round(Math.random())]:e[0]},t.dice=function(){return!!Math.round(Math.random())},t.flat=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}},function(e,t,n){(function(e){var n={};!function(e){var t=e.DEFAULT_VOLUME=90,n=(e.DEFAULT_DURATION=128,e.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(e){var t=/([a-g])(#+|b+)?([0-9]+)$/i.exec(e),r=t[1].toLowerCase(),i=t[2]||"";return 12*parseInt(t[3],10)+n.midi_letter_pitches[r]+("#"==i.substr(0,1)?1:-1)*i.length},ensureMidiPitch:function(e){return"number"!=typeof e&&/[^0-9]/.test(e)?n.midiPitchFromNote(e):parseInt(e,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(e,t){var r,i=0,o=e;t=t||!1;return e>23&&(o=e-12*(i=Math.floor(e/12)-1)),r=n.midi_pitches_letter[o],t&&r.indexOf("#")>0&&(r=n.midi_flattened_notes[r]),r+i},mpqnFromBpm:function(e){var t=Math.floor(6e7/e),n=[];do{n.unshift(255&t),t>>=8}while(t);for(;n.length<3;)n.push(0);return n},bpmFromMpqn:function(e){if(void 0!==e[0]){0;for(var t=0,n=e.length-1;n>=0;++t,--n)e[t]<<n}return Math.floor(6e7/e)},codes2Str:function(e){return String.fromCharCode.apply(null,e)},str2Bytes:function(e,t){if(t)for(;e.length/2<t;)e="0"+e;for(var n=[],r=e.length-1;r>=0;r-=2){var i=0===r?e[r]:e[r-1]+e[r];n.unshift(parseInt(i,16))}return n},translateTickTime:function(e){for(var t=127&e;e>>=7;)t<<=8,t|=127&e|128;for(var n=[];n.push(255&t),128&t;)t>>=8;return n}}),r=function(e){if(!this)return new r(e);!e||null===e.type&&void 0===e.type||null===e.channel&&void 0===e.channel||null===e.param1&&void 0===e.param1||(this.setTime(e.time),this.setType(e.type),this.setChannel(e.channel),this.setParam1(e.param1),this.setParam2(e.param2))};r.NOTE_OFF=128,r.NOTE_ON=144,r.AFTER_TOUCH=160,r.CONTROLLER=176,r.PROGRAM_CHANGE=192,r.CHANNEL_AFTERTOUCH=208,r.PITCH_BEND=224,r.prototype.setTime=function(e){this.time=n.translateTickTime(e||0)},r.prototype.setType=function(e){if(e<r.NOTE_OFF||e>r.PITCH_BEND)throw new Error("Trying to set an unknown event: "+e);this.type=e},r.prototype.setChannel=function(e){if(e<0||e>15)throw new Error("Channel is out of bounds.");this.channel=e},r.prototype.setParam1=function(e){this.param1=e},r.prototype.setParam2=function(e){this.param2=e},r.prototype.toBytes=function(){var e=[],t=this.type|15&this.channel;return e.push.apply(e,this.time),e.push(t),e.push(this.param1),void 0!==this.param2&&null!==this.param2&&e.push(this.param2),e};var i=function(e){if(!this)return new i(e);this.setTime(e.time),this.setType(e.type),this.setData(e.data)};i.SEQUENCE=0,i.TEXT=1,i.COPYRIGHT=2,i.TRACK_NAME=3,i.INSTRUMENT=4,i.LYRIC=5,i.MARKER=6,i.CUE_POINT=7,i.CHANNEL_PREFIX=32,i.END_OF_TRACK=47,i.TEMPO=81,i.SMPTE=84,i.TIME_SIG=88,i.KEY_SIG=89,i.SEQ_EVENT=127,i.prototype.setTime=function(e){this.time=n.translateTickTime(e||0)},i.prototype.setType=function(e){this.type=e},i.prototype.setData=function(e){this.data=e},i.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var e=[];if(e.push.apply(e,this.time),e.push(255,this.type),Array.isArray(this.data))e.push(this.data.length),e.push.apply(e,this.data);else if("number"==typeof this.data)e.push(1,this.data);else if(null!==this.data&&void 0!==this.data){e.push(this.data.length);var t=this.data.split("").map((function(e){return e.charCodeAt(0)}));e.push.apply(e,t)}else e.push(0);return e};var o=function(e){if(!this)return new o(e);var t=e||{};this.events=t.events||[]};o.START_BYTES=[77,84,114,107],o.END_BYTES=[0,255,47,0],o.prototype.addEvent=function(e){return this.events.push(e),this},o.prototype.addNoteOn=o.prototype.noteOn=function(e,i,o,a){return this.events.push(new r({type:r.NOTE_ON,channel:e,param1:n.ensureMidiPitch(i),param2:a||t,time:o||0})),this},o.prototype.addNoteOff=o.prototype.noteOff=function(e,i,o,a){return this.events.push(new r({type:r.NOTE_OFF,channel:e,param1:n.ensureMidiPitch(i),param2:a||t,time:o||0})),this},o.prototype.addNote=o.prototype.note=function(e,t,n,r,i){return this.noteOn(e,t,r,i),n&&this.noteOff(e,t,n,i),this},o.prototype.addChord=o.prototype.chord=function(e,t,n,r){if(!Array.isArray(t)&&!t.length)throw new Error("Chord must be an array of pitches");return t.forEach((function(t){this.noteOn(e,t,0,r)}),this),t.forEach((function(t,r){0===r?this.noteOff(e,t,n):this.noteOff(e,t)}),this),this},o.prototype.setInstrument=o.prototype.instrument=function(e,t,n){return this.events.push(new r({type:r.PROGRAM_CHANGE,channel:e,param1:t,time:n||0})),this},o.prototype.setTempo=o.prototype.tempo=function(e,t){return this.events.push(new i({type:i.TEMPO,data:n.mpqnFromBpm(e),time:t||0})),this},o.prototype.toBytes=function(){var e=0,t=[],r=o.START_BYTES,i=o.END_BYTES;this.events.forEach((function(n){var r=n.toBytes();e+=r.length,t.push.apply(t,r)})),e+=i.length;var a=n.str2Bytes(e.toString(16),4);return r.concat(a,t,i)};var a=function(e){if(!this)return new a(e);var t=e||{};if(t.ticks){if("number"!=typeof t.ticks)throw new Error("Ticks per beat must be a number!");if(t.ticks<=0||t.ticks>=32768||t.ticks%1!=0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=t.ticks||128,this.tracks=t.tracks||[]};a.HDR_CHUNKID="MThd",a.HDR_CHUNK_SIZE="\0\0\0",a.HDR_TYPE0="\0\0",a.HDR_TYPE1="\0",a.prototype.addTrack=function(e){return e?(this.tracks.push(e),this):(e=new o,this.tracks.push(e),e)},a.prototype.toBytes=function(){var e=this.tracks.length.toString(16),t=a.HDR_CHUNKID+a.HDR_CHUNK_SIZE;return parseInt(e,16)>1?t+=a.HDR_TYPE1:t+=a.HDR_TYPE0,t+=n.codes2Str(n.str2Bytes(e,2)),t+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach((function(e){t+=n.codes2Str(e.toBytes())})),t},e.Util=n,e.File=a,e.Track=o,e.Event=r,e.MetaEvent=i}(n),null!==e?e.exports=n:null!==t?t=n:this.Midi=n}).call(this,n(4)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.midi=t.arp=t.progression=t.getChordsByProgression=t.getChordDegrees=t.clip=t.chords=t.chord=t.modes=t.scales=t.mode=t.scale=void 0;var r=n(0);Object.defineProperty(t,"scales",{enumerable:!0,get:function(){return r.scales}}),Object.defineProperty(t,"modes",{enumerable:!0,get:function(){return r.scales}}),Object.defineProperty(t,"chords",{enumerable:!0,get:function(){return r.chords}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return r.scale}}),Object.defineProperty(t,"mode",{enumerable:!0,get:function(){return r.scale}}),Object.defineProperty(t,"chord",{enumerable:!0,get:function(){return r.chord}});var i=n(5);Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return i.clip}});var o=n(6);Object.defineProperty(t,"getChordDegrees",{enumerable:!0,get:function(){return o.getChordDegrees}}),Object.defineProperty(t,"getChordsByProgression",{enumerable:!0,get:function(){return o.getChordsByProgression}}),Object.defineProperty(t,"progression",{enumerable:!0,get:function(){return o.progression}});var a=n(7);Object.defineProperty(t,"arp",{enumerable:!0,get:function(){return a.arp}});var s=n(8);Object.defineProperty(t,"midi",{enumerable:!0,get:function(){return s.midi}});var u=n(10);Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return u.Session}})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.clip=t.renderingDuration=t.totalPatternDuration=t.recursivelyApplyPatternToDurations=void 0;var a=n(1),s=n(0),u=function(e){if(a.isNote(e))return[e];if(Array.isArray(e))return e.forEach((function(e){if(!a.isNote(e))throw new TypeError("array must comprise valid notes")})),e;if(!Array.isArray(e)){var t=s.chord(e);if(t&&t.length)return t}throw new Error("Chord "+e+" not found")},c=function(e,t,n){return"R"===e&&t.randomNotes?t.randomNotes[(r=t.randomNotes.length-1,void 0===r&&(r=1),Math.round(Math.random()*r))]:t.notes[n%t.notes.length];var r},l=function(e,t){return e.durations?e.durations[t%e.durations.length]:e.dur||e.subdiv||"8n"},p=function(e){var t=0;return e.instrument instanceof Tone.Player?function(n,r){"x"!==r&&"R"!==r||(e.instrument.start(n),t++)}:e.instrument instanceof Tone.PolySynth||e.instrument instanceof Tone.Sampler?function(n,r){"x"!==r&&"R"!==r||(e.instrument.triggerAttackRelease(c(r,e,t),l(e,t),n),t++)}:e.instrument instanceof Tone.NoiseSynth?function(n,r){"x"!==r&&"R"!==r||(e.instrument.triggerAttackRelease(l(e,t),n),t++)}:function(n,r){"x"!==r&&"R"!==r||(e.instrument.triggerAttackRelease(c(r,e,t)[0],l(e,t),n),t++)}};t.recursivelyApplyPatternToDurations=function(e,n,r){return void 0===r&&(r=[]),e.forEach((function(e){"string"==typeof e&&("x"!==e&&"R"!==e||r.push(n),"_"===e&&r.length&&(r[r.length-1]+=n)),Array.isArray(e)&&t.recursivelyApplyPatternToDurations(e,n/e.length,r)})),r};var h=function(e,n){var r;if(n=n||Tone.getContext(),!e.pattern)throw new Error("No pattern provided!");if(!(e.player||e.instrument||e.sample||e.buffer||e.synth||e.sampler||e.samples))throw new Error("No player or instrument provided!");e.durations||e.dur||(e.durations=t.recursivelyApplyPatternToDurations(a.expandStr(e.pattern),Tone.Ticks(e.subdiv||"4n").toSeconds()));var i=[];return e.effects&&(Array.isArray(e.effects)||(e.effects=[e.effects]),i=e.effects.map((function(e){return("string"==typeof e?new Tone[e]({context:n}):e.context!==n?m(e,n):e).toDestination()})).map((function(e){return"function"==typeof e.start?e.start():e}))),e.synth&&!e.instrument&&(e.instrument=e.synth,console.warn('The "synth" parameter will be deprecated in the future. Please use the "instrument" parameter instead.')),e.instrument=e.sample||e.buffer?new Tone.Player({url:e.sample||e.buffer,context:n}):e.sampler?e.sampler:e.player?e.player:e.samples?new Tone.Sampler({url:e.samples,context:n}):"string"==typeof e.instrument?new Tone[e.instrument]({context:n}):e.instrument,e.instrument.context!==n&&(e.instrument=m(e.instrument,n)),e.volume&&(e.instrument.volume.value=e.volume),(r=e.instrument).chain.apply(r,i).toDestination(),new Tone.Sequence({callback:p(e),events:a.expandStr(e.pattern),subdivision:e.subdiv||"4n",context:n})};t.totalPatternDuration=function(e,t){return"number"==typeof t?t*a.expandStr(e).length:Tone.Ticks(t).toSeconds()*a.expandStr(e).length};t.renderingDuration=function(e,n,r,i){var o=e.split("").filter((function(e){return"x"===e})).length,a=e.split("").filter((function(e){return"R"===e})).length,s=(null==i?void 0:i.length)?o:o+a,u=r.length||1;return t.totalPatternDuration(e,n)/s*function(e,t){for(var n=e<t?[e,t]:[t,e],r=n[0],i=n[1],o=i;o%r!=0;)o+=i;return o}(u,s)};var f,d=0,m=function(e,t){if(e instanceof Tone.PolySynth)return new Tone.PolySynth(Tone[e._dummyVoice.name],r(r({},e.get()),{context:t}));if(e instanceof Tone.Player)return new Tone.Player({url:e._buffer,context:t});if(e instanceof Tone.Sampler){var n=e.get(),i={attack:n.attack,curve:n.curve,release:n.release,volume:n.volume},o={baseUrl:e._buffers.baseUrl,urls:Object.fromEntries(e._buffers._buffers.entries())};return new Tone.Sampler(r(r(r({},i),o),{context:t}))}return new Tone[e.name](r(r({},e.get()),{context:t}))};t.clip=function(e){if("string"==typeof(e=r(r({},{notes:["C4"],pattern:"x",shuffle:!1,sizzle:!1,sizzleReps:1,arpegiate:!1,subdiv:"4n",amp:100,accentLow:70,randomNotes:null,effects:[],offlineRendering:!1}),e||{})).notes&&(e.notes=e.notes.replace(/\s{2,}/g," "),e.notes=e.notes.split(" ")),e.notes=e.notes.map(u),/[^x\-_\[\]R]/.test(e.pattern))throw new TypeError("pattern can only comprise x - _ [ ], found "+e.pattern);return e.shuffle&&(e.notes=a.shuffle(e.notes)),e.randomNotes&&"string"==typeof e.randomNotes&&(e.randomNotes=e.randomNotes.replace(/\s{2,}/g," ").split(/\s/)),e.randomNotes&&(e.randomNotes=e.randomNotes.map(u)),e.offlineRendering?function(e,t){f||(f=Tone.getContext()),d++;var n=new Tone.Player({context:f,loop:!0});return Tone.Offline((function(t){return i(void 0,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=h(e,t),[4,Tone.loaded()];case 1:return r.sent(),n.start(),t.transport.start(),[2]}}))}))}),t).then((function(t){var r;n.buffer=t,0===--d&&(Tone.setContext(f),null===(r=e.offlineRenderingCallback)||void 0===r||r.call(e))})),n.toDestination(),n.sync(),n}(e,t.renderingDuration(e.pattern,e.subdiv||"4n",e.notes,e.randomNotes)):h(e,f)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.progression=t.getChordsByProgression=t.getChordDegrees=void 0;var r=n(0),i=n(1);t.getChordDegrees=function(e){var t={ionian:["I","ii","iii","IV","V","vi","vii°"],dorian:["i","ii","III","IV","v","vi°","VII"],phrygian:["i","II","III","iv","v°","VI","vii"],lydian:["I","II","iii","iv°","V","vi","vii"],mixolydian:["I","ii","iii°","IV","v","vi","VII"],aeolian:["i","ii°","III","iv","v","VI","VII"],locrian:["i°","II","iii","iv","V","VI","vii"],"melodic minor":["i","ii","III+","IV","V","vi°","vii°"],"harmonic minor":["i","ii°","III+","iv","V","VI","vii°"]};return t.major=t.ionian,t.minor=t.aeolian,t[e]||[]};var o={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6};t.getChordsByProgression=function(e,t){var n=e.split(" ");n[0].match(/\d/)||(n[0]+="4",e=n.join(" "));var i=r.scale(e);return t.replace(/\s*,+\s*/g," ").split(" ").map((function(e,t){var n=function(e){var t=e.replace(/\W/g,""),n="M";return t.toLowerCase()===t&&(n="m"),e.indexOf("°")>-1?n+"7b5":e.indexOf("+")>-1?n+"#5":e.indexOf("7")>-1?"M"===n?"Maj7":"m7":n}(e),r=o[e.replace(/\W|\d/g,"").toLowerCase()],a=i[r],s=a.replace(/\D+/,"");return a.replace(/\d/,"")+n+"_"+s})).toString().replace(/,/g," ")};var a=function(e){var t=e.T,n=e.P,r=e.D;return function(e){void 0===e&&(e=4);var o=[];o.push(i.pickOne(t));var a=1;for(a<e-1&&(o.push(i.pickOne(n)),a++),a<e-1&&i.dice()&&(o.push(i.pickOne(n)),a++),a<e-1&&(o.push(i.pickOne(r)),a++),a<e-1&&(o.push(i.pickOne(n)),a++),a<e-1&&(o.push(i.pickOne(r)),a++),a<e-1&&i.dice()&&(o.push(i.pickOne(n)),a++);a<e;)o.push(i.pickOne(r)),a++;return o}},s=a({T:["I","vi"],P:["ii","IV"],D:["V"]}),u=a({T:["i","VI"],P:["ii","iv"],D:["V"]});t.progression=function(e,t){return void 0===t&&(t=4),"major"===e||"M"===e?s(t):"minor"===e||"m"===e?u(t):void 0}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.arp=void 0;var i=n(0),o=function(e,t){var n=function(e){return e.replace(/\d/,"")+(+e.replace(/\D/g,"")+1)},i=e.map(n),o=i.map(n);return r(e,i,o).slice(0,t)};t.arp=function(e){var t=[],n={count:4,order:"0123",chords:""};if("string"==typeof e)n.chords=e;else{if(e.order&&e.order.match(/\D/g))throw new TypeError("Invalid value for order");if(e.count>8||e.count<2)throw new TypeError("Invalid value for count");e.count&&!e.order&&(n.order=Array.from(Array(e.count).keys()).join("")),Object.assign(n,e)}if("string"==typeof n.chords)for(var a=function(e){var a=o(i.chord(e),n.count),s=n.order.split("").map((function(e){return a[e]}));t=r(t,s)},s=0,u=n.chords.split(" ");s<u.length;s++){a(u[s])}else{if(!Array.isArray(n.chords))throw new TypeError("Invalid value for chords");for(var c=function(e){var i=o(e,n.count),a=n.order.split("").map((function(e){return i[e]}));t=r(t,a)},l=0,p=n.chords;l<p.length;l++){c(p[l])}}return t}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.midi=void 0;var s=a(n(9)),u=o(n(2));t.midi=function(e,t,n){void 0===t&&(t="music.mid");var r=l(e,n).toBytes();return null===t?r:(t.endsWith(".mid")||(t+=".mid"),"undefined"!=typeof window&&window.URL&&window.URL.createObjectURL?c(r,t):(s.default.writeFileSync(t,r,"binary"),void console.log("MIDI file generated: "+t+".")))};var c=function(e,t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++){var i=e.charCodeAt(r);n[r]=i}var o=new Blob([n],{type:"audio/midi"}),a=document.createElement("a");return a.href="undefined"!=typeof window&&void 0!==window.URL&&void 0!==window.URL.createObjectURL&&window.URL.createObjectURL(o)||"",a.download=t,a.innerText="Download MIDI file",a},l=function(e,t){var n=new u.File,r=new u.Track;"number"==typeof t&&r.setTempo(t),n.addTrack(r);for(var i=0,o=e;i<o.length;i++){var a=o[i],s=a.level||127;a.note?"string"==typeof a.note?(r.noteOn(0,a.note,a.length,s),r.noteOff(0,a.note,a.length,s)):r.addChord(0,a.note,a.length,s):r.noteOff(0,"",a.length)}return n}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;var r=n(11),i=function(){function e(e){e=e||[],this.sessionChannels=e.map((function(e,t){return e.idx=e.idx||t,new r.Channel(e)}))}return e.prototype.createChannel=function(e){e.idx=e.idx||this.sessionChannels.length;var t=new r.Channel(e);return this.sessionChannels.push(t),t},Object.defineProperty(e.prototype,"channels",{get:function(){return this.sessionChannels},enumerable:!1,configurable:!0}),e.prototype.startRow=function(e){this.sessionChannels.forEach((function(t){t.startClip(e)}))},e.prototype.play=function(e){var t=this,n=e.channelPatterns,r=e.clipDuration||"4:0:0",i=Tone.Time(r).toSeconds(),o=function(e,t){e.forEach((function(e){return e.stop(t)}))};n.forEach((function(e){var n=e.channelIdx,r=e.pattern,a=[],s=0,u="-";r.split("").forEach((function(e){e!==u&&"_"!==e&&(o(a,s),a=function(e,n,r){return"-"===n?[]:t.channels.filter((function(t){return t.idx===e})).map((function(e){return e.clips[n].start(r)}))}(n,e,s)),u=e,s+=i})),o(a,s)}))},e}();t.Session=i},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;var o=n(12),a=function(){var e=Tone.Transport.position.split(":");return"0"===e[0]&&"0"===e[1]?0:+e[0]+1+":0:0"},s=function(){function e(e){var t=this;this.idx=e.idx||0,this.activePatternIdx=-1,this.channelClips=[],e.sample&&(this.player=new Tone.Player(e.sample)),e.synth&&(this.instrument=new Tone[e.synth]),e.samples&&(this.sampler=new Tone.Sampler(e.samples));e.clips,e.samples,e.sample,e.synth;var n=i(e,["clips","samples","sample","synth"]);e.clips.forEach((function(e){t.addClip(r(r({},e),n))}),this)}return Object.defineProperty(e.prototype,"clips",{get:function(){return this.channelClips},enumerable:!1,configurable:!0}),e.prototype.startClip=function(e){this.activePatternIdx>-1&&this.activePatternIdx!==e&&this.stopClip(this.activePatternIdx),this.channelClips[e]&&"started"!==this.channelClips[e].state&&(this.activePatternIdx=e,this.channelClips[e].start(a()))},e.prototype.stopClip=function(e){this.channelClips[e].stop(a())},e.prototype.addClip=function(e,t){t=t||this.channelClips.length,e.pattern?this.channelClips[t]=o.clip(r({player:this.player,instrument:this.instrument,sampler:this.sampler},e)):this.channelClips[t]=null},Object.defineProperty(e.prototype,"activeClipIdx",{get:function(){return this.activePatternIdx},enumerable:!1,configurable:!0}),e}();t.Channel=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clip=void 0;var i=n(1),o=n(0),a={"1m":2048,"2m":4096,"3m":6144,"4m":8192,"1n":512,"2n":256,"4n":128,"8n":64,"16n":32},s=function(e){if(i.isNote(e))return[e];if(Array.isArray(e))return e.forEach((function(e){if(!i.isNote(e))throw new TypeError("array must comprise valid notes")})),e;if(!Array.isArray(e)){var t=o.chord(e);if(t&&t.length)return t}throw new Error("Chord "+e+" not found")};t.clip=function(e){if("string"==typeof(e=r(r({},{notes:["C4"],pattern:"x",shuffle:!1,sizzle:!1,sizzleReps:1,arpegiate:!1,subdiv:"4n",amp:100,accentLow:70,randomNotes:null,effects:[],offlineRendering:!1}),e||{})).notes&&(e.notes=e.notes.replace(/\s{2,}/g," "),e.notes=e.notes.split(" ")),e.notes=e.notes.map(s),/[^x\-_\[\]R]/.test(e.pattern))throw new TypeError("pattern can only comprise x - _ [ ], found "+e.pattern);e.shuffle&&(e.notes=i.shuffle(e.notes)),e.randomNotes&&"string"==typeof e.randomNotes&&(e.randomNotes=e.randomNotes.replace(/\s{2,}/g," ").split(/\s/)),e.randomNotes&&(e.randomNotes=e.randomNotes.map(s));var t=[],n=0,o=function(r,i){r.forEach((function(r){if("string"==typeof r){var a=e.notes[n];"R"===r&&(Math.round(Math.random())||e.randomNotes)&&(a=e.randomNotes?e.randomNotes[Math.round(Math.random()*(e.randomNotes.length-1))]:e.notes[n]),"x"!==r&&"R"!==r||n++,"x"!==r&&"-"!==r&&"R"!==r||t.push({note:a,length:i,level:"R"!==r||e.randomNotes?e.amp:e.accentLow}),"_"===r&&t.length&&(t[t.length-1].length+=i),n===e.notes.length&&(n=0)}Array.isArray(r)&&o(r,i/r.length)}))};if(o(i.expandStr(e.pattern),a[e.subdiv]||a["4n"]),e.sizzle){var u=[],c=!0===e.sizzle?"sin":e.sizzle,l=t.length,p=e.amp,h=e.sizzleReps,f=p/(l/h);if("sin"===c||"cos"===c)for(var d=0;d<l;d++){var m=Math[c](d*Math.PI/(l/h))*p;u.push(Math.round(Math.abs(m)))}if("rampUp"===c)for(m=0,d=0;d<l;d++)d%(l/h)==0?m=0:m+=f,u.push(Math.round(Math.abs(m)));if("rampDown"===c)for(m=p,d=0;d<l;d++)d%(l/h)==0?m=p:m-=f,u.push(Math.round(Math.abs(m)));for(d=0;d<u.length;d++)t[d].level=u[d]?u[d]:1}if(e.accent){if(/[^x\-]/.test(e.accent))throw new TypeError("Accent can only have x and - characters");for(var y=0,v=0,H=t;v<H.length;v++){var W=H[v];m="x"===e.accent[y]?e.amp:e.accentLow;e.sizzle&&(m=(W.level+m)/2),W.level=Math.round(m),(y+=1)===e.accent.length&&(y=0)}}return t}}]));